module.exports = {
  initial:'p2plex_to_hoster',
  states: {
    p2plex_to_hoster: {
      entry: ['p2plex_connect'],
      on: {
        RESOLVE: 'provide_proof_of_storage_report',
        REJECT: 'fail_to_connect'
      }
    },
    receive_data: {
      entry: ['receive_data', 'verify'],
      exit: ['disconnect'],
      on: {
        RESOLVE: 'provide_proof_of_storage_report',
        REJECT: 'fail_to_receive_data'
      }
    },
    provide_proof_of_storage_report: {
      entry: ['send_report'],
      on: {
        RESOLVE: '#idleState',
        REJECT: 'fail_to_report'
      }
    },
    fail_to_report: {
      on: {
        RETRY: 'provide_proof_of_storage_report'
      }
    },
    fail_to_receive_data: {
      on: {
        RETRY: 'receive_data'
      }
    },
    fail_to_connect: {
      on: {
        RETRY: 'p2plex_to_hoster'
      }
    },
  }
}
