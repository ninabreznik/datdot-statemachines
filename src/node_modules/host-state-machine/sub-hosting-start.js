module.exports = {
    initial: 'connect_to_attestor',
    states: {
      connect_to_attestor: {
        entry: ['p2plex_to_attestor'],
        on: {
          _RESOLVE: 'receive_and_store_data',
          _REJECT: 'failure_connect_to_attestor' // retry
        },
      },
      failure_connect_to_attestor: {
        on: {
          RETRY: 'connect_to_attestor'
        }
      },
      receive_and_store_data: {
        entry: ['receive_data', 'verify_data', 'store_data'], // stream, all happening in parallel
        exit: ['disconnect'],
        on: {
          _RESOLVE: '#idleState',
          _REJECT: 'failure_receive_and_store_data' // retry
        },
      },
      failure_receive_and_store_data: {
        on: {
          RETRY: 'receive_and_store_data'
        }
      },
    }
}
